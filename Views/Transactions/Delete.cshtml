@model traq_web_project_assessment.ViewModels.TransactionViewModel

@{
    ViewData["Title"] = "Delete Transaction";
}

<div class="mb-4">
    <a asp-controller="Accounts" asp-action="Details" asp-route-id="@Model.AccountId" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Back to Account
    </a>
</div>

<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow border-danger">
            <div class="card-header bg-danger text-white">
                <h4 class="mb-0"><i class="fas fa-exclamation-triangle"></i> Delete Transaction</h4>
            </div>
            <div class="card-body">
                <div class="alert alert-danger" role="alert">
                    <h5><i class="fas fa-exclamation-circle"></i> Are you sure you want to delete this transaction?</h5>
                    <p class="mb-0">This action cannot be undone. The account balance will be recalculated automatically.</p>
                </div>

                <div class="card bg-light mb-3">
                    <div class="card-body">
                        <h6><i class="fas fa-wallet"></i> Account Information:</h6>
                        <p class="mb-1"><strong>Account:</strong> @Model.AccountNumber</p>
                        <p class="mb-0"><strong>Holder:</strong> @Model.PersonName</p>
                    </div>
                </div>

                <h5>Transaction Details:</h5>
                <dl class="row">
                    <dt class="col-sm-4">Transaction Date:</dt>
                    <dd class="col-sm-8">@Model.TransactionDate.ToString("dd MMMM yyyy")</dd>

                    <dt class="col-sm-4">Type:</dt>
                    <dd class="col-sm-8">
                        <span class="badge @(Model.DebitAmount > 0 ? "bg-danger" : "bg-success")">
                            @Model.TransactionType
                        </span>
                    </dd>

                    <dt class="col-sm-4">Amount:</dt>
                    <dd class="col-sm-8">
                        <strong class="@(Model.DebitAmount > 0 ? "text-danger" : "text-success")">
                            @Model.Amount.ToString("C2")
                        </strong>
                    </dd>

                    <dt class="col-sm-4">Description:</dt>
                    <dd class="col-sm-8">@Model.Description</dd>

                    <dt class="col-sm-4">Capture Date:</dt>
                    <dd class="col-sm-8">@Model.CaptureDate.ToString("dd MMM yyyy HH:mm")</dd>
                </dl>

                <div class="alert alert-warning" role="alert">
                    <i class="fas fa-info-circle"></i>
                    <strong>Note:</strong> Deleting this transaction will affect the account balance.
                    The balance will be recalculated automatically.
                </div>

                <hr />

                <form asp-action="Delete" method="post">
                    <input type="hidden" asp-for="Id" />
                    <div class="d-flex justify-content-between">
                        <a asp-controller="Accounts" asp-action="Details" asp-route-id="@Model.AccountId"
                           class="btn btn-secondary">
                            <i class="fas fa-times"></i> Cancel
                        </a>
                        <button type="submit" class="btn btn-danger">
                            <i class="fas fa-trash"></i> Confirm Delete
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
